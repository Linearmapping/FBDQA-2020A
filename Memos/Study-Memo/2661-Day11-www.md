# 量化策略的深入诊断
- 备兑策略靠谱
- 宏观经济环境数据e.g. CPI，经济周期、基础利率；
- 行业与公司基本面e.g. 大宗商品。分析师研报板块
- 基于市场交易数据：市场宏观、市场微观。流动性分析
- 做多股票，做空股指期货。股指期货：中金所；股票：上交所，深交所。不同的交易所的数据接口不同，发布行情时间也不同步，故而两组价格数据的时间需要一致，否则信号可能是错的。
- 统计分析：过拟合检验，鲁棒性分析（不是只针对特殊情况适用），样本内外测试（训练集、测试集要区分开，test模型参数的generalization ability），协整分析，数据样本检验（有没有异常值），统计检验。
- level2 tick 数据：10毫秒级别；大部分策略运行在分钟级别


1. 鉴别回测中的收益率是运气还是实力
- 复权还是不复权
 - 股票型策略至少要夸一个牛熊周期回测，不能太短，刚好赶上同期大盘好
 - 回测周期碰巧抓到大牛股
 - 过拟合，只适用于某个阶段（样本外测试，有没有3.15的ATR止损，0.156783%的风险因子？（指调参））
 - 未来函数
 - 回测统计意义：回测阶段至少要70次交易（一次交易股票指一买一卖，期货指一开一平）
 - 回测打破交易规则：停牌成交（注意临时停牌情况）（怎么设置？？？）
 - 流动性缺失时却正常成交：涨停、跌停不能买卖；特殊涨跌停限制：新股、ST股票、科创板688xxx/创业板300xxx股票
 - 流动性对成交量的影响：单笔成交量不超过当日股票成交量的10%，应该不超过2% → 交易量限制
 - 日内信号不能用开盘价成交；不能精确地以日收盘价成交（实际中从2：50开始一点点卖，最后拿到的是这段时间的均价，回测建议这样会接近真实情况，但是用收盘价也ok）
 - 偶然性影响：相同条件下回测结果应该一致；e.g. 策略中有随机因素，例如资金限制导致股票池中只能买一部分，可能是随机挑选的；要看其影响大不大，不大的话没问题。
 
 

2. 检验未来函数
- 函数必须满足时序不变性，即时间靠后的数据不对时间靠前的结果产生影响
- 典型情况：1. 偷价：一清早知道收盘价；最低价买入，最高价卖出；当日买入当日卖出
           2. 收盘价成交：沪深交易所尾盘撮合机制
           3. 财务/公告类指标的更新时间：基金重仓股的启示（基金发布的重仓股，公司发布的十大股东）；公司公告与股价的关系；事件驱动型策略；
              - 来源：上市公司季报；在一定的时间范围内更新；但每家公司的的季报更新日期并不一致；第三方平台提供的财务类因子：存在提前更新的情况
              
           4. 高频交易的成本和成交价
           
           

3. 量化策略诊断checklist
