###第12次课笔记
张心远 2018012227 

####量化策略的深入诊断
***
#####量化策略的特点
* 认知偏差
	* 提高认知宽度、避免情绪偏差
* 流程细则与技术方案选择
	* 高速通信通道/托管机房/网络架构 
* 数据的处理
	* 数据对齐、清洗、校验、手机
	* 数据对齐：接收到的价格时间应该一致
* 统计分析
	* 鲁棒性分析、过拟合检验、样本内外测试、协整性分析、数据样本检验...
* 调试修正
	* 回测平台选择/计算层面维度选择
	* 系统层面的操作系统选择：linux，不带图形界面的操作系统
	* 编程语言：c++/py
	* 样本内外测试、鲁棒性检验
#####鉴别虚高收益率
* 收益率虚高的原因
	* 回测周期短、赶上同期大盘好
	* 回测周期碰巧抓到牛股
	* 过拟合，只适用于某个阶段
	* 使用了未来函数 
	* 回测是否具有统计意义
		* 一般回测阶段至少需要70次交易，最好>200次  
	* 是否违背了交易规则
		* 是否停牌/临时停牌：看当根k线交易量
		* 流动性缺失时不能正常成交
			* 涨跌停
			* 特殊涨跌停限制：新股、ST、创业板/科创板
	* 是否考虑流动性对成交量的影响
		* 单笔成交量超过当日该股成交量的10%（2%）
	* 是否过于理想化地使用价格
		* 日内信号，以开盘价成交
		* 能否精确用日收盘价成交，作业中可以用收盘价近似
	*	是否存在偶然性影响  
* 未来函数
	* 偷价：提前知道未来的收盘价/T+0
	* 财务/公告类指标与事件驱动型策略
		* 指标来源：上市公司季度报表
		* 第三方平台整理的财务类因子
			* e.g.同时被两家基金公司重仓的股票 
			* 存在提前更新的情况
		* 事件驱动型策略的问题
			* 信息来源：上市公司公告/新闻
			* 通常发布时间：交易日收盘后，第二天通常停牌
			* 复牌后的市场反应：连续涨停/跌停
			* 典型的未来函数：公告日收盘价买入
	* 高频交易的成本 
#####量化策略 诊断checklist
* 回测多周期
* 回测多起点
* 样本外测试：调参和测试不能用一个样本
* 足够多的交易笔数
* 检查几个关键指标：
	* SR、最大回撤、年化、信息旅、索提诺比率...
* 交易记录
	* 不能有未来函数
	* 成交价格是否合理
	* 成本是否合理
	* 重点检查停复牌和复权
* 反思交易逻辑

####数学部分：蒙特卡洛模拟和期权估值
***
#####蒙特卡洛模拟
定义：一类基于概率的方法
* 随机数生成：numpy.random
	* uniform：npr.rand
	* normal: standard_normal or normal
	* chisquare: npr.chisquare
*  应用：模拟股票指数
	* black-scholes-merton公式：未来某日期T的股票指数水平的公式
	$S_T=S_0*exp((r-0.5\sigma_2)T+\sigma\sqrt{T}z)$  
	* 通过normal产生近似分布
	* 或者取对数，lognormal产生近似 
	* 离散求解：几何布朗运动
* 应用：期权估值
