###第九周课堂笔记
张心远 2018012227

####金融数据分析
***
#####数学工具
衍生品的风险重力价值需要用风险中立测度下的预期折现收益来表示，即积分
* 数值积分函数库：scipy.integrate
* 数值积分
	* fixed_quad，固定高斯求积
	* quad，自适应求积分
	* romberg，勒贝格积分
* 蒙特卡洛积分
	* 通过蒙特卡洛模拟的期权和衍生品估值，依赖于通过模拟求取积分
* 符号计算：sympy
	* symbol类，可以自动简化给定的数学表达式，并且可以写成函数形式表达多项式
	* 求解方式
	* sympy做不定积分
	* 做为分晕眩，不能保证有符号解
#####python高性能计算库
常用高性能包：
* numexpr，快速数值运算
* multiprocessing，并行处理
* numba，为CPU动态编译代码
* cython，合并py和c静态编译泛型
小结：
提高计算性能的方式：库/编译方案/并行化

####金融部分：如何获取alpha
***
#####alpha的实际操作框架
种类：股票ETF（散户主导）、期货（杠杆&保证金）和债券、期权（机构主导）
* 基本逻辑：对冲beta，常用股指期货（期指）
	e.g. 做空一手IF对应¥300，市值大概144w，然后做多144w的股票组合
* 问题：对冲工具比较少，基本只有期货期权和融券（成本比较高）
* 特点：高风险、高收益，适合高风险偏好，中等资金规模
	对冲手段支撑不了太高的资金规模
* alpha的来源：风险敞口
	* 挑选长期跑赢市场的股票/板块
	* 一般不择时，但需要很好的选股
* 收益特点
	* 牛市初期：指数筑底，alpha收益很高，刚建仓容易出现升水
		升贴水：升水：IF>HS300；贴水反之；大部分时候股指期货是贴水的；
		希望开盘的时候IF处于升水状态；
		IF交割以现金结算，交割价格是收盘HS300的均价
	* 牛市中期：IF大幅升水，持仓的状况下不希望IF大幅升水
		非常考验这时候alpha策略的风控能力
	* 熊市初期：大幅贴水
#####更多交易型策略的逻辑简介
* 商品期货策略
	* 规则
		* 保证金交易
		* 交割（不涉及实物，一般在交割月前移仓）
		* 主力合约：不同的久期
		* 报价特点：一秒两次（股票3秒一次，指数5秒一次）
	* 交易原理：商品配对/套利
		* 同一板块中商品的价格相关性高
	* 跨品种套利：农产品、能源、基本金属、钢材燃料、金银  
		* e.g. 疫苗，一般分析师利好航空，优秀分析师利好白酒
		* 不能轻信统计相关性
	* 跨期套利：不同到期日的合约价差在一个比较稳定的区间，如果价差出现大波动就可以进场等套利机会
		* 为什么会出现这种机会？
			流动性偏好理论：近期合约是主力合约，流动性好 ；
			远期合约受大宗交易影响/波动非常剧烈；
		* 手动下单一般跟不上，需要程序化交易
	* 产品特性跨期：e.g. 橡胶的季节性，一月和九月存在但方向套利机会
		* 交易逻辑：产品的季节性；
			除非产品的生产工艺改变/套利的人多了，否则套利逻辑不会改变
    * 一般会用相关性较弱的多板块共同交易，风险分散化
    	例外：今年covid19，很多板块相关性突然变强
* 投资交易模型基本研发流程
策略建模 -- 追溯测试 -- 绩效评估、修正错误 -- 实盘测试、自动化操作
* 交易性策略：数据驱动、发现规律
	要求：风险可控
	常见类型：多空策略（慎用，对标的特性需要有更好的了解）/回归策略
	* e.g. HANS123：振荡突破策略，怕大幅波动
		* 开盘：多空第一次博弈 
		* 开盘一段时间，价格/价差突破上轨做多/止损，突破下轨做空/止损
		* 离场之前收盘
		* 风控：限制一天中反向做盘的次数；
		* 外汇中比较有效，因为外汇价格通常是发散的，受关键事件节点的干扰，有趋势倾向
			但现在外汇波动也比较大，卜太行
	*	回归逻辑：用的更多 
	*	ETF套利
		* 一二级市场套利：直接实现价差
			* IOPV：反映一级市场净值
		*	二级市场轮动：高抛低吸，但需要一直持有多头，因此需要对冲
			* 沪深300对应的ETF有若干只
			* 每个产品的交易价格和IOPV的折价/溢价可能差别很大
		* 期现套利：
			* 利用交割日期货和现货价格必然回归的策略

