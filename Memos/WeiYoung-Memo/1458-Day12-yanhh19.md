# 第十二周课堂小结
## 量化策略的深入诊断
1. 量化策略开发基本流程
  * 量化策略的特点：认知偏差、情绪偏差、系统性、高效率、纪律性
  * 交易模型基本研发流程：基于宏观经济环境数据；基于行业与公司基本面；基于市场交易数据
  * 流程细则与技术方案选择：
    + 数据的处理
    + 统计分析
    + 调试修正
2. 鉴别回测中的虚高收益率是运气还是实力
  * 什么算是高收益（平均年化收益15%？）
  * 造成回测中收益率虚高的原因
    + 可以避免的：年化计算有bug；回测周期太短，赶上同期大盘好（跨一个牛熊周期，三四年）；回测周期碰巧抓到大牛股；过度拟合，只适用于某个阶段
    + 需要认真检查的隐蔽逻辑错误：使用了未来函数
  * 回测是否具有统计意义（回测阶段交易次数不少于200次，最少70次——一次交易是一买一卖）
  * 是否违背了交易规则
  * 是否在出现流动性缺失时也能正常成交（涨停不能买，跌停不能卖；20cm是对上证科创板和深证创业板的限制）
  * 是否考虑了流动性对成交量的影响（实际执行中单笔成交量一般不超过当日该股票成交量的2%）
  * 是否过于理想化地使用了价格
  * 是否存在偶然性影响
3. 检验策略逻辑的隐蔽问题：未来函数
  * 函数必须满足时序不变形，时间靠后的数据不对时间靠前的结果产生影响
  * 未来函数的几种典型情况：偷价（最低价买，最高价卖）；收盘价成交的问题；财务/公告类指标的更新（上市公司季报的更新时期在一定的范围内，但并不一致，第三方平台整理的财务类因子存在提前更新的情况）——基金重仓股、事件驱动型策略的问题（重大资产重组——公告日收盘价买入，一般买不到）
4. 量化策略诊断checklist
  * 回测多周期；回测多起点；样本外测试；足够多的交易笔数；检查几个关键指标；检查交易记录；反思交易逻辑；翻盘年数=最大回撤/年化收益（越小越好，回撤能够尽快弥补）

## 蒙特卡洛模拟和期权估值
1. 蒙特卡洛模拟
  * 基于概率的方法
  * 均匀分布、正态分布、卡方分布、泊松分布
  * 应用：计算圆周率；模拟股票指数（股价平均数）；期权定价BSM公式；几何布朗运动
2. 期权估值（欧式期权）
